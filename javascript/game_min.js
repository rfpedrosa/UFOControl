function cursor_clear(){document.body.style.cursor="default"}function cursor_pointer(){document.body.style.cursor="pointer"}function AudioEffectsButtonHandler(){var a=document.getElementById("audio_effects");audio_effects_enabled=a.checked}function AudioButtonHandler(){var a=document.getElementById("img_audio");audio_playing=!audio_playing;if(audio_playing){a.src="img/audio/audio_on.png";a.title="Audio enabled";audio.play()}else{a.src="img/audio/audio_off.png";a.title="Audio disable";audio.pause()}}function ChangeSpeedButtonHandler(){if(Ticker.getInterval()==50){forwardShape.visible=false;rewindShape.visible=true;Ticker.setInterval(25)}else{forwardShape.visible=true;rewindShape.visible=false;Ticker.setInterval(50)}stage.update()}function PlayButtonHandler(){if(isDead){handleClick()}else if(Ticker.getPaused()){Ticker.setPaused(false);playShape.visible=false;pauseShape.visible=true;stage.update()}else if(!Ticker.getPaused()){Ticker.setPaused(true);playShape.visible=true;pauseShape.visible=false;stage.update()}}function touchHandler(a){var b=a.changedTouches,c=b[0],d="";switch(a.type){case"touchstart":d="onMouseDown";break;case"touchmove":d="onMouseMove";break;case"touchend":d="onMouseUp";break;default:return}var e=document.createEvent("MouseEvent");e.initMouseEvent(d,true,true,window,1,c.screenX,c.screenY,c.clientX,c.clientY,false,false,false,false,0,null);c.target.dispatchEvent(e);a.preventDefault()}function onMouseOut(a){if(!a){a=window.event}if(!isDead&&!dragStarted&&mouseTarget){mouseTarget.mouseOut();mouseTarget=null;cursor_clear()}}function onMouseOver(a){if(!a){a=window.event}if(!isDead&&!dragStarted){try{var b=stage.getObjectUnderPoint(a.stageX,a.stageY)}catch(c){}if(b&&b.parent.isActive){mouseTarget=b.parent;mouseTarget.mouseOver();cursor_pointer()}}}function onMouseUp(a){dragStarted=false;if(!isDead&&mouseTarget){onMouseOut(a)}}function onMouseDown(a){if(!a){a=window.event}if(!isDead&&!mouseTarget){onMouseOver(a)}if(!isDead&&mouseTarget&&mouseTarget.isActive){dragStarted=true;mouseTarget.clearRoute();mouseTarget.setAirportRouteTraced(false);startPt=mouseTarget.routeShape.globalToLocal(stage.mouseX,stage.mouseY);mouseTarget.addRoutePoint(startPt.x,startPt.y)}}function onMouseMove(a){if(!a){a=window.event}if(!isDead&&dragStarted&&mouseTarget){mouseTarget.addRoutePoint(stage.mouseX,stage.mouseY);if(mouseTarget.type==UFO.TYPE1&&hitRadius(stage.mouseX,stage.mouseY,mouseTarget.hit,UFO1_AIRPORT.x,UFO1_AIRPORT.y,UFO1_AIRPORT.radius)){mouseTarget.setAirportRouteTraced(true)}else if(mouseTarget.type==UFO.TYPE2&&hitRadius(stage.mouseX,stage.mouseY,mouseTarget.hit,UFO2_AIRPORT.x,UFO2_AIRPORT.y,UFO2_AIRPORT.radius)){mouseTarget.setAirportRouteTraced(true)}else{mouseTarget.setAirportRouteTraced(false)}}}function publish_Results(a){var b=localStorage.getItem(LOCAL_STORAGE_KEY);if(!b||a>b){localStorage.setItem(LOCAL_STORAGE_KEY,a);messageField2.text="Your Current Max Score is: "+a}}function GameOver(a,b){if(audio_alarm!=null){audio_alarm.pause()}a.explode();b.explode();if(audio_effects_enabled&&audio_explosion!=null){audio_explosion.play()}isDead=true;messageField1.text="Game Over. Your score is...  "+score+"!";messageField1.color="#FF0000";if(score==0){messageField2.text="\n Drag and Drop UFO to the right planet!"}else if(score<50){messageField2.text="\n Tip: Try to define common routes for each UFO type."}else if(score<100){messageField2.text="\n Great result! Keep going..."}else if(score<200){messageField2.text="\n Uauu! Amazing result! You are a pro..."}else{messageField2.text="\n Beautiful! Are you an Alien?!? :)"}scoreField.alpha=.5;scoreFieldValue.alpha=.5;UFO1_AIRPORT_PLANET_SHAPE.alpha=.5;UFO2_AIRPORT_PLANET_SHAPE.alpha=.5;for(id in mapIdDisplayObject){var c=mapIdDisplayObject[id];c.bitmap.alpha=.5}messageContainer.visible=true;stage.update();alert("Game Over. Your score is...  "+score+"!");publish_Results(score);stage.update();canvas.onclick=PlayButtonHandler}function increaseScore(a){score+=a;var b=CREATE_UFO_DELAY_TIME*Math.pow(.95,Math.floor(Math.sqrt(score)));last_create_airplanes_delay_time=Math.round((Math.random()+.5)*b);scoreFieldValue.text=score.toString()}function tick(){if(audio!=null&&audio_playing){audio.play()}if(!isDead&&dragStarted&&mouseTarget){var a=mouseTarget.routeShape.globalToLocal(stage.mouseX,stage.mouseY);mouseTarget.drawRoute(startPt.x,startPt.y,a.x,a.y);startPt=a;var b=new Date;if(b.getTime()-lastTrackBlinkDate.getTime()>BLINK_TIME){if(mouseTarget.type==UFO.TYPE1){UFO1_AIRPORT_ARROW_SHAPE.visible=!UFO1_AIRPORT_ARROW_SHAPE.visible;UFO1_AIRPORT_PLANET_SHAPE.alpha=1}else if(mouseTarget.type==UFO.TYPE2){UFO2_AIRPORT_ARROW_SHAPE.visible=!UFO2_AIRPORT_ARROW_SHAPE.visible;UFO2_AIRPORT_PLANET_SHAPE.alpha=1}lastTrackBlinkDate=b}}else{UFO1_AIRPORT_ARROW_SHAPE.visible=false;UFO2_AIRPORT_ARROW_SHAPE.visible=false;UFO1_AIRPORT_PLANET_SHAPE.alpha=.5;UFO2_AIRPORT_PLANET_SHAPE.alpha=.5}var c=false;for(id in mapIdDisplayObject){var d=mapIdDisplayObject[id];if(d==mouseTarget){continue}d.move();if(!isDead&&d.isActive){var e=true;for(otherId in mapIdDisplayObject){var f=mapIdDisplayObject[otherId];if(d==f||!f.isActive){continue}if(d.hitRadius(f.bitmap.x,f.bitmap.y,f.hit)){d.changeToWarningMode(f.hit*4);f.changeToWarningMode(f.hit*4);GameOver(d,f);return}else if(d.hitRadius(f.bitmap.x,f.bitmap.y,f.hit*4)){e=false}}if(e){d.changeToNormalMode()}else{d.changeToWarningMode(f.hit*4);c=true}if(d.type==UFO.TYPE1&&d.hitRadius(UFO1_AIRPORT.x,UFO1_AIRPORT.y,UFO1_AIRPORT.radius)&&d.isAirportRouteTraced){d.land(UFO1_AIRPORT_ROUTE);increaseScore(1)}else if(d.type==UFO.TYPE2&&d.hitRadius(UFO2_AIRPORT.x,UFO2_AIRPORT.y,UFO2_AIRPORT.radius)&&d.isAirportRouteTraced){d.land(UFO2_AIRPORT_ROUTE);increaseScore(1)}}if(d.isToDelete){delete mapIdDisplayObject[id];stage.removeChild(d)}}if(c&&audio_effects_enabled&&audio_alarm!=null){audio_alarm.play()}else if(audio_alarm!=null){audio_alarm.pause()}b=new Date;if(b.getTime()-last_airplane_created.getTime()>last_create_airplanes_delay_time||mapIdDisplayObject.length==0){if(!isDead){addUFO(TICKS_BEFORE_ACTIVE_START_COUNTER)}last_airplane_created=b}BlinkSomeStars();stage.update()}function getAvailableStartPosition(){for(i=0;i<100;i++){var a=Math.random();var b;var c;if(a>.5){b=Math.round(canvas.width*Math.random());c=Math.round(Math.random())*canvas.height}else{b=Math.round(Math.random())*canvas.width;c=Math.round(canvas.height*Math.random())}if(b==0){b=16}if(b==canvas.width){b=canvas.width-16}if(c==0){c=16}if(c==canvas.height){c=canvas.height-16}var d=true;for(id in mapIdDisplayObject){var e=mapIdDisplayObject[id];if(e.hitRadius(b,c,e.hit*4)){d=false;break}}if(d){return new Point(b,c)}}return null}function addUFO(a){var b=getAvailableStartPosition();if(!b){return null}var c=Math.floor(Math.random()*2)+1;var d=new UFO(c,a,canvas.width,canvas.height);d.setPosition(b.x,b.y);d.bitmap.onMouseOver=onMouseOver;d.bitmap.onMouseOut=onMouseOut;d.bitmap.mouseEnabled=true;mapIdDisplayObject[d.id]=d;stage.addChild(d);return d}function handleClick(){canvas.onclick=null;for(id in mapIdDisplayObject){var a=mapIdDisplayObject[id];stage.removeChild(a)}mapIdDisplayObject=new Object;score=0;scoreFieldValue.text=score.toString();last_increase_dificulty_time=new Date;last_airplane_created=new Date;last_create_airplanes_delay_time=CREATE_UFO_DELAY_TIME;last_nr_airplane_created=0;factor=.85;lastTrackBlinkDate=new Date;scoreField.alpha=1;scoreFieldValue.alpha=1;messageContainer.visible=false;addUFO(0);addUFO(TICKS_BEFORE_ACTIVE_START_COUNTER);stage.update();isDead=false}function DrawSun(a){}function drawAsteroids(a){for(i=0;i<=20;i++){var b=new Shape;var c=Math.floor(Math.random()*canvas.width);var d=Math.floor(Math.random()*canvas.height);b.graphics.beginFill("#FF0000");if(c>40&&d>40&&c<canvas.width-30&&d<canvas.height-30){b.graphics.arc(c,d,10,0,Math.PI*2,true);b.graphics.endFill()}else--i}b.graphics.beginFill("#0000FF");b.graphics.rect(canvas.width-30,canvas.height-30,30,30);b.graphics.endFill();a.addChild(b)}function BlinkSomeStars(){for(var a=0;a<Math.floor(STARS_NUMBER/5);a++){var b=Math.floor(Math.random()*STARS_NUMBER);stars[b].alpha=Math.random()/2}}function DrawStars(a){for(var b=0;b<STARS_NUMBER;b++){var c=new Shape;var d=Math.floor(Math.random()*canvas.width);var e=Math.floor(Math.random()*canvas.height);c.graphics.beginFill("#FFFFFF");if(d<30||e<30){c.graphics.beginFill("#000000")}c.graphics.drawPolyStar(d,e,4,5,.6,-90);c.graphics.endFill();c.alpha=.4;stars.push(c);a.addChild(c)}}function DrawScenario(){var a=new Container;DrawStars(a);DrawSun(a);var b=new Image;b.src="img/planets/mars.png";UFO1_AIRPORT_PLANET_SHAPE=new Bitmap(b);if(canvas.width>1366){UFO1_AIRPORT=new Circle(Math.round(canvas.width-canvas.width/6),Math.round(canvas.height/2+20),75);UFO1_AIRPORT_PLANET_SHAPE.scaleX=UFO1_AIRPORT_PLANET_SHAPE.scaleY=1.5}else if(canvas.width>1024){UFO1_AIRPORT=new Circle(Math.round(canvas.width-canvas.width/6),Math.round(canvas.height/2+20),50)}else{UFO1_AIRPORT=new Circle(Math.round(canvas.width-canvas.width/6),Math.round(canvas.height/2+20),25);UFO1_AIRPORT_PLANET_SHAPE.scaleX=UFO1_AIRPORT_PLANET_SHAPE.scaleY=.5}UFO1_AIRPORT_PLANET_SHAPE.name="Mars";UFO1_AIRPORT_PLANET_SHAPE.x=UFO1_AIRPORT.x-UFO1_AIRPORT.radius;UFO1_AIRPORT_PLANET_SHAPE.y=UFO1_AIRPORT.y-UFO1_AIRPORT.radius;UFO1_AIRPORT_PLANET_SHAPE.alpha=.5;UFO1_AIRPORT_ARROW_SHAPE=new Shape;var c=new Rectangle(UFO1_AIRPORT.x-UFO1_AIRPORT.radius,UFO1_AIRPORT.y-UFO1_AIRPORT.radius,UFO1_AIRPORT.radius*2,UFO1_AIRPORT.radius*2);UFO1_AIRPORT_ARROW_SHAPE.graphics.setStrokeStyle(3,"round","round").beginStroke(Graphics.getRGB(255,0,0,1));drawArrowsAroundRectangle(UFO1_AIRPORT_ARROW_SHAPE.graphics,c,false);UFO1_AIRPORT_ARROW_SHAPE.graphics.endStroke();UFO1_AIRPORT_ARROW_SHAPE.visible=false;UFO1_AIRPORT_ROUTE.length=0;UFO1_AIRPORT_ROUTE.push(new Point(UFO1_AIRPORT.x,UFO1_AIRPORT.y));b=new Image;b.src="img/planets/venus.png";UFO2_AIRPORT_PLANET_SHAPE=new Bitmap(b);if(canvas.width>1366){UFO2_AIRPORT=new Circle(Math.round(canvas.width/6),Math.round(canvas.height/2-20),75);UFO2_AIRPORT_PLANET_SHAPE.scaleX=UFO2_AIRPORT_PLANET_SHAPE.scaleY=1.5}else if(canvas.width>1024){UFO2_AIRPORT=new Circle(Math.round(canvas.width/6),Math.round(canvas.height/2-20),50)}else{UFO2_AIRPORT=new Circle(Math.round(canvas.width/6),Math.round(canvas.height/2-20),25);UFO2_AIRPORT_PLANET_SHAPE.scaleX=UFO2_AIRPORT_PLANET_SHAPE.scaleY=.5}UFO2_AIRPORT_PLANET_SHAPE.name="Venus";UFO2_AIRPORT_PLANET_SHAPE.x=UFO2_AIRPORT.x-UFO2_AIRPORT.radius;UFO2_AIRPORT_PLANET_SHAPE.y=UFO2_AIRPORT.y-UFO2_AIRPORT.radius;UFO2_AIRPORT_PLANET_SHAPE.alpha=.5;UFO2_AIRPORT_ARROW_SHAPE=new Shape;c=c=new Rectangle(UFO2_AIRPORT.x-UFO2_AIRPORT.radius,UFO2_AIRPORT.y-UFO2_AIRPORT.radius,UFO2_AIRPORT.radius*2,UFO2_AIRPORT.radius*2);UFO2_AIRPORT_ARROW_SHAPE.graphics.setStrokeStyle(3,"round","round").beginStroke(Graphics.getRGB(255,0,0,1));drawArrowsAroundRectangle(UFO2_AIRPORT_ARROW_SHAPE.graphics,c,false);UFO2_AIRPORT_ARROW_SHAPE.graphics.endStroke();UFO2_AIRPORT_ARROW_SHAPE.visible=false;UFO2_AIRPORT_ROUTE.length=0;UFO2_AIRPORT_ROUTE.push(new Point(UFO2_AIRPORT.x,UFO2_AIRPORT.y));a.addChild(UFO1_AIRPORT_PLANET_SHAPE);a.addChild(UFO1_AIRPORT_ARROW_SHAPE);a.addChild(UFO2_AIRPORT_PLANET_SHAPE);a.addChild(UFO2_AIRPORT_ARROW_SHAPE);stage.addChild(a)}function watchStart(){messageContainer=new Container;messageField1.x=canvas.width/2;messageField1.y=canvas.height/2-canvas.height/4+canvas.height/6;messageField1.outline=true;messageContainer.addChild(messageField1);messageField2.x=canvas.width/2;messageField2.y=canvas.height/2;messageField2.textBaseline="hanging";messageContainer.addChild(messageField2);var a=new Shape;a.graphics.setStrokeStyle(50,"round","round").beginStroke(Graphics.getRGB(91,91,91,.5));a.graphics.rect(canvas.width/2-canvas.width/4,canvas.height/2-canvas.height/4,canvas.width/2,canvas.height/2);a.graphics.endStroke();var b=new Shape;b.graphics.setStrokeStyle(3,"round","round").beginStroke(Graphics.getRGB(255,255,255,1));b.graphics.drawCircle(canvas.width-canvas.width/4-5,canvas.height/4+5,25);b.graphics.moveTo(canvas.width-canvas.width/4-15,canvas.height/4-10);b.graphics.lineTo(canvas.width-canvas.width/4+5,canvas.height/4+20);b.graphics.moveTo(canvas.width-canvas.width/4+5,canvas.height/4-10);b.graphics.lineTo(canvas.width-canvas.width/4-15,canvas.height/4+20);b.graphics.endStroke();messageContainer.addChild(a);messageContainer.addChild(b);messageContainer.visible=true;stage.addChild(messageContainer);playShape=new Shape;playShape.graphics.beginFill("#dfeeff");playShape.graphics.moveTo(canvas.width/2-40,canvas.height-35);playShape.graphics.lineTo(canvas.width/2-40,canvas.height-15);playShape.graphics.lineTo(canvas.width/2-15,canvas.height-25);playShape.graphics.lineTo(canvas.width/2-40,canvas.height-35);playShape.graphics.endFill();playShape.visible=false;playShape.mouseEnabled=true;playShape.onClick=PlayButtonHandler;playShape.onMouseOver=cursor_pointer;playShape.onMouseOut=cursor_clear;pauseShape=new Shape;pauseShape.graphics.beginFill("#dfeeff");pauseShape.graphics.rect(canvas.width/2-40,canvas.height-35,10,20);pauseShape.graphics.rect(canvas.width/2-25,canvas.height-35,10,20);pauseShape.graphics.endFill();pauseShape.mouseEnabled=true;pauseShape.onClick=PlayButtonHandler;pauseShape.onMouseOver=cursor_pointer;pauseShape.onMouseOut=cursor_clear;forwardShape=new Shape;forwardShape.graphics.beginFill("#dfeeff");forwardShape.graphics.moveTo(canvas.width/2+15,canvas.height-35);forwardShape.graphics.lineTo(canvas.width/2+15,canvas.height-15);forwardShape.graphics.lineTo(canvas.width/2+20,canvas.height-25);forwardShape.graphics.lineTo(canvas.width/2+15,canvas.height-35);forwardShape.graphics.moveTo(canvas.width/2+25,canvas.height-35);forwardShape.graphics.lineTo(canvas.width/2+25,canvas.height-15);forwardShape.graphics.lineTo(canvas.width/2+30,canvas.height-25);forwardShape.graphics.lineTo(canvas.width/2+25,canvas.height-35);forwardShape.graphics.endFill();forwardShape.mouseEnabled=true;forwardShape.onClick=ChangeSpeedButtonHandler;forwardShape.onMouseOver=cursor_pointer;forwardShape.onMouseOut=cursor_clear;rewindShape=new Shape;rewindShape.graphics.beginFill("#dfeeff");rewindShape.graphics.moveTo(canvas.width/2+20,canvas.height-35);rewindShape.graphics.lineTo(canvas.width/2+20,canvas.height-15);rewindShape.graphics.lineTo(canvas.width/2+15,canvas.height-25);rewindShape.graphics.lineTo(canvas.width/2+20,canvas.height-35);rewindShape.graphics.moveTo(canvas.width/2+30,canvas.height-35);rewindShape.graphics.lineTo(canvas.width/2+30,canvas.height-15);rewindShape.graphics.lineTo(canvas.width/2+25,canvas.height-25);rewindShape.graphics.lineTo(canvas.width/2+30,canvas.height-35);rewindShape.graphics.endFill();rewindShape.visible=false;rewindShape.mouseEnabled=true;rewindShape.onClick=ChangeSpeedButtonHandler;rewindShape.onMouseOver=cursor_pointer;rewindShape.onMouseOut=cursor_clear;stage.addChild(playShape);stage.addChild(pauseShape);stage.addChild(forwardShape);stage.addChild(rewindShape);scoreField.alpha=.5;stage.addChild(scoreField);scoreFieldValue.alpha=.5;scoreFieldValue.text=score.toString();stage.addChild(scoreFieldValue);DrawScenario();var c=addUFO(0);c.bitmap.alpha=.5;c=addUFO(0);c.bitmap.alpha=.5;c=addUFO(0);c.bitmap.alpha=.5;stage.update();canvas.onclick=PlayButtonHandler;Ticker.addListener(window)}function init(){canvas=document.getElementById("game_canvas");canvas.width=window.innerWidth-window.innerWidth*.02;canvas.height=window.innerHeight-window.innerHeight*.02;audio=document.getElementById("music");audio_alarm=document.getElementById("alarm");audio_explosion=document.getElementById("explosion");context=canvas.getContext("2d");stage=new Stage(canvas);stage.mouseEnabled=true;stage.enableMouseOver(50);canvas.onmousemove=onMouseMove;canvas.onmousedown=onMouseDown;canvas.onmouseup=onMouseUp;document.addEventListener("touchstart",touchHandler,true);document.addEventListener("touchmove",touchHandler,true);document.addEventListener("touchend",touchHandler,true);document.addEventListener("touchcancel",touchHandler,true);if(canvas.width>1024){scoreField=new Text("Total UFO Landed: ","Italic 34px Sans-Serif","#FF0000")}else{scoreField=new Text("Total UFO Landed: ","Italic 20px Sans-Serif","#FF0000")}scoreField.textAlign="right";scoreField.x=canvas.width-40;scoreField.y=42;if(canvas.width>1024){scoreFieldValue=new Text("0","bold 34px Sans-Serif","#00FF00")}else{scoreFieldValue=new Text("0","bold 20px Sans-Serif","#00FF00")}scoreFieldValue.textAlign="right";scoreFieldValue.x=canvas.width-20;scoreFieldValue.y=42;if(canvas.width>800){messageField1=new Text("Welcome to the UFO Control Game!!","bold 34px Arial","#919191")}else{messageField1=new Text("Welcome to the UFO Control Game!!","bold 34px Arial","#919191")}messageField1.textAlign="center";messageField2=new Text("Avoid Space Rocks and lead all the \n\n\n        Unidentified Flying Object (UFO) to his planet!","bold 20px Arial","#919191");messageField2.textAlign="center";var a=localStorage.getItem(LOCAL_STORAGE_KEY);if(!a){a=0}else{messageField2.text="Your Current Max Score is: "+a}watchStart()}function drawArrowsAroundRectangle(a,b,c){a.moveTo(b.x-30,b.y+b.height/2);a.lineTo(b.x-10,b.y+b.height/2);a.lineTo(b.x-20,b.y+b.height/2+5);a.moveTo(b.x-10,b.y+b.height/2);a.lineTo(b.x-20,b.y+b.height/2-5);if(!c){a.moveTo(b.x+b.width+30,b.y+b.height/2);a.lineTo(b.x+b.width+10,b.y+b.height/2);a.lineTo(b.x+b.width+20,b.y+b.height/2+5);a.moveTo(b.x+b.width+10,b.y+b.height/2);a.lineTo(b.x+b.width+20,b.y+b.height/2-5)}a.moveTo(b.x+b.width/2,b.y-30);a.lineTo(b.x+b.width/2,b.y-10);a.lineTo(b.x+b.width/2+5,b.y-20);a.moveTo(b.x+b.width/2,b.y-10);a.lineTo(b.x+b.width/2-5,b.y-20);a.moveTo(b.x+b.width/2,b.y+b.height+30);a.lineTo(b.x+b.width/2,b.y+b.height+10);a.lineTo(b.x+b.width/2+5,b.y+b.height+20);a.moveTo(b.x+b.width/2,b.y+b.height+10);a.lineTo(b.x+b.width/2-5,b.y+b.height+20)}function hitRadius(a,b,c,d,e,f){if(d-f>a+c){return false}if(d+f<a-c){return false}if(e-f>b+c){return false}if(e+f<b-c){return false}return c+f>Math.sqrt(Math.pow(Math.abs(a-d),2)+Math.pow(Math.abs(b-e),2))}function hitRectangle(a,b,c){if(c.x<=a&&a<=c.x+c.width&&c.y<=b&&b<=c.y+c.height){return true}return false}(function(a){UID=function(){throw"UID cannot be instantiated"};UID._nextID=0;UID.get=function(){return UID._nextID++};a.UID=UID})(window);(function(a){Ticker=function(){throw"Ticker cannot be instantiated."};Ticker._listeners=[];Ticker._pauseable=[];Ticker._paused=false;Ticker._inited=false;Ticker._startTime=0;Ticker._pausedTime=0;Ticker._ticks=0;Ticker._pausedTickers=0;Ticker._interval=50;Ticker._intervalID=null;Ticker._lastTime=0;Ticker._times=[];Ticker.addListener=function(a,b){if(!Ticker._inited){Ticker._inited=true;Ticker.setInterval(Ticker._interval)}this.removeListener(a);Ticker._pauseable[Ticker._listeners.length]=b==null?true:b;Ticker._listeners.push(a)};Ticker.removeListener=function(a){if(Ticker._listeners!=null){a=Ticker._listeners.indexOf(a);if(a!=-1){Ticker._listeners.splice(a,1);Ticker._pauseable.splice(a,1)}}};Ticker.removeAllListeners=function(){Ticker._listeners=[];Ticker._pauseable=[]};Ticker.setInterval=function(a){Ticker._intervalID!=null&&clearInterval(Ticker._intervalID);Ticker._lastTime=Ticker._getTime();Ticker._interval=a;Ticker._intervalID=setInterval(Ticker._tick,a)};Ticker.getInterval=function(){return Ticker._interval};Ticker.getFPS=function(){return 1e3/Ticker._interval};Ticker.setFPS=function(a){Ticker.setInterval(1e3/a)};Ticker.getMeasuredFPS=function(a){if(Ticker._times.length<2)return-1;if(a==null)a=Ticker.getFPS()>>1;a=Math.min(Ticker._times.length-1,a);return 1e3/((Ticker._times[0]-Ticker._times[a])/a)};Ticker.setPaused=function(a){Ticker._paused=a};Ticker.getPaused=function(){return Ticker._paused};Ticker.getTime=function(a){return Ticker._getTime()-Ticker._startTime-(a?Ticker._pausedTime:0)};Ticker.getTicks=function(a){return Ticker._ticks-(a?Ticker._pausedTickers:0)};Ticker._tick=function(){Ticker._ticks++;var a=Ticker.getTime(false),b=a-Ticker._lastTime,c=Ticker._paused;if(c){Ticker._pausedTickers++;Ticker._pausedTime+=b}Ticker._lastTime=a;for(var d=Ticker._pauseable,e=Ticker._listeners,f=e?e.length:0,g=0;g<f;g++){var h=d[g],i=e[g];i==null||c&&h||i.tick==null||i.tick(b)}Ticker._times.unshift(a);Ticker._times.length>100&&Ticker._times.pop()};Ticker._getTime=function(){return(new Date).getTime()};Ticker._startTime=Ticker._getTime();a.Ticker=Ticker})(window);(function(a){MouseEvent=function(a,b,c){this.initialize(a,b,c)};var b=MouseEvent.prototype;b.stageX=0;b.stageY=0;b.type=null;b.onMouseMove=null;b.onMouseUp=null;b.initialize=function(a,b,c){this.type=a;this.stageX=b;this.stageY=c};b.clone=function(){return new MouseEvent(this.type,this.stageX,this.stageY)};b.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"};a.MouseEvent=MouseEvent})(window);(function(a){Matrix2D=function(a,b,c,d,e,f){this.initialize(a,b,c,d,e,f)};var b=Matrix2D.prototype;Matrix2D.identity=null;Matrix2D.DEG_TO_RAD=Math.PI/180;b.a=1;b.b=0;b.c=0;b.d=1;b.tx=0;b.ty=0;b.alpha=1;b.shadow=null;b.compositeOperation=null;b.initialize=function(a,b,c,d,e,f){if(a!=null)this.a=a;if(b!=null)this.b=b;if(c!=null)this.c=c;if(d!=null)this.d=d;if(e!=null)this.tx=e;if(f!=null)this.ty=f};b.prepend=function(a,b,c,d,e,f){var g=this.tx;if(a!=1||b!=0||c!=0||d!=1){var h=this.a,i=this.c;this.a=h*a+this.b*c;this.b=h*b+this.b*d;this.c=i*a+this.d*c;this.d=i*b+this.d*d}this.tx=g*a+this.ty*c+e;this.ty=g*b+this.ty*d+f};b.append=function(a,b,c,d,e,f){var g=this.a,h=this.b,i=this.c,j=this.d;this.a=a*g+b*i;this.b=a*h+b*j;this.c=c*g+d*i;this.d=c*h+d*j;this.tx=e*g+f*i+this.tx;this.ty=e*h+f*j+this.ty};b.prependMatrix=function(a){this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty);this.prependProperties(a.alpha,a.shadow,a.compositeOperation)};b.appendMatrix=function(a){this.append(a.a,a.b,a.c,a.d,a.tx,a.ty);this.appendProperties(a.alpha,a.shadow,a.compositeOperation)};b.prependTransform=function(a,b,c,d,e,f,g,h,i){if(e%360){var j=e*Matrix2D.DEG_TO_RAD;e=Math.cos(j);j=Math.sin(j)}else{e=1;j=0}if(h||i){this.tx-=h;this.ty-=i}if(f||g){f*=Matrix2D.DEG_TO_RAD;g*=Matrix2D.DEG_TO_RAD;this.prepend(e*c,j*c,-j*d,e*d,0,0);this.prepend(Math.cos(g),Math.sin(g),-Math.sin(f),Math.cos(f),a,b)}else this.prepend(e*c,j*c,-j*d,e*d,a,b)};b.appendTransform=function(a,b,c,d,e,f,g,h,i){if(e%360){var j=e*Matrix2D.DEG_TO_RAD;e=Math.cos(j);j=Math.sin(j)}else{e=1;j=0}if(f||g){f*=Matrix2D.DEG_TO_RAD;g*=Matrix2D.DEG_TO_RAD;this.append(Math.cos(g),Math.sin(g),-Math.sin(f),Math.cos(f),a,b);this.append(e*c,j*c,-j*d,e*d,0,0)}else this.append(e*c,j*c,-j*d,e*d,a,b);if(h||i){this.tx-=h*this.a+i*this.c;this.ty-=h*this.b+i*this.d}};b.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var c=this.a,d=this.c,e=this.tx;this.a=c*b-this.b*a;this.b=c*a+this.b*b;this.c=d*b-this.d*a;this.d=d*a+this.d*b;this.tx=e*b-this.ty*a;this.ty=e*a+this.ty*b};b.skew=function(a,b){a*=Matrix2D.DEG_TO_RAD;b*=Matrix2D.DEG_TO_RAD;this.append(Math.cos(b),Math.sin(b),-Math.sin(a),Math.cos(a),0,0)};b.scale=function(a,b){this.a*=a;this.d*=b;this.tx*=a;this.ty*=b};b.translate=function(a,b){this.tx+=a;this.ty+=b};b.identity=function(){this.alpha=this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;this.shadow=this.compositeOperation=null};b.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;this.a=d/f;this.b=-b/f;this.c=-c/f;this.d=a/f;this.tx=(c*this.ty-d*e)/f;this.ty=-(a*this.ty-b*e)/f};b.decompose=function(a){if(a==null)a={};a.x=this.tx;a.y=this.ty;a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b);a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var b=Math.atan2(-this.c,this.d),c=Math.atan2(this.b,this.a);if(b==c){a.rotation=c/Matrix2D.DEG_TO_RAD;if(this.a<0&&this.d>=0)a.rotation+=a.rotation<=0?180:-180;a.skewX=a.skewY=0}else{a.skewX=b/Matrix2D.DEG_TO_RAD;a.skewY=c/Matrix2D.DEG_TO_RAD}return a};b.appendProperties=function(a,b,c){this.alpha*=a;this.shadow=b||this.shadow;this.compositeOperation=c||this.compositeOperation};b.prependProperties=function(a,b,c){this.alpha*=a;this.shadow=this.shadow||b;this.compositeOperation=this.compositeOperation||c};b.clone=function(){var a=new Matrix2D(this.a,this.b,this.c,this.d,this.tx,this.ty);a.shadow=this.shadow;a.alpha=this.alpha;a.compositeOperation=this.compositeOperation;return a};b.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"};Matrix2D.identity=new Matrix2D(1,0,0,1,0,0);a.Matrix2D=Matrix2D})(window);(function(a){Point=function(a,b){this.initialize(a,b)};var b=Point.prototype;b.x=0;b.y=0;b.initialize=function(a,b){this.x=a==null?0:a;this.y=b==null?0:b};b.clone=function(){return new Point(this.x,this.y)};b.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};a.Point=Point})(window);(function(a){Rectangle=function(a,b,c,d){this.initialize(a,b,c,d)};var b=Rectangle.prototype;b.x=0;b.y=0;b.width=0;b.height=0;b.initialize=function(a,b,c,d){this.x=a==null?0:a;this.y=b==null?0:b;this.width=c==null?0:c;this.height=d==null?0:d};b.clone=function(){return new Rectangle(this.x,this.y,this.width,this.height)};b.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"};a.Rectangle=Rectangle})(window);(function(a){Shadow=function(a,b,c,d){this.initialize(a,b,c,d)};var b=Shadow.prototype;Shadow.identity=null;b.color=null;b.offsetX=0;b.offsetY=0;b.blur=0;b.initialize=function(a,b,c,d){this.color=a;this.offsetX=b;this.offsetY=c;this.blur=d};b.toString=function(){return"[Shadow]"};b.clone=function(){return new Shadow(this.color,this.offsetX,this.offsetY,this.blur)};Shadow.identity=new Shadow(null,0,0,0);a.Shadow=Shadow})(window);(function(a){SpriteSheet=function(a,b,c,d){this.initialize(a,b,c,d)};var b=SpriteSheet.prototype;b.image=null;b.frameWidth=0;b.frameHeight=0;b.frameData=null;b.loop=true;b.totalFrames=0;b.initialize=function(a,b,c,d){this.image=a;this.frameWidth=b;this.frameHeight=c;this.frameData=d};b.toString=function(){return"[SpriteSheet]"};b.clone=function(){var a=new SpriteSheet(this.image,this.frameWidth,this.frameHeight,this.frameData);a.loop=this.loop;a.totalFrames=this.totalFrames;return a};a.SpriteSheet=SpriteSheet})(window);(function(l){function b(a,b){this.f=a;this.params=b}b.prototype.exec=function(a){this.f.apply(a,this.params)};Graphics=function(a){this.initialize(a)};var a=Graphics.prototype;Graphics.getRGB=function(a,b,c,d){if(a!=null&&c==null){d=b;c=a&255;b=a>>8&255;a=a>>16&255}return d==null?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"};Graphics.getHSL=function(a,b,c,d){return d==null?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"};Graphics.STROKE_CAPS_MAP=["butt","round","square"];Graphics.STROKE_JOINTS_MAP=["miter","round","bevel"];Graphics._ctx=document.createElement("canvas").getContext("2d");Graphics.beginCmd=new b(Graphics._ctx.beginPath,[]);Graphics.fillCmd=new b(Graphics._ctx.fill,[]);Graphics.strokeCmd=new b(Graphics._ctx.stroke,[]);a._strokeInstructions=null;a._strokeStyleInstructions=null;a._fillInstructions=null;a._instructions=null;a._oldInstructions=null;a._activeInstructions=null;a._active=false;a._dirty=false;a.initialize=function(c){this.clear();this._ctx=Graphics._ctx;with(this)eval(c)};a.draw=function(a){this._dirty&&this._updateInstructions();for(var b=this._instructions,c=0,d=b.length;c<d;c++)b[c].exec(a)};a.moveTo=function(a,c){this._activeInstructions.push(new b(this._ctx.moveTo,[a,c]));return this};a.lineTo=function(a,c){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.lineTo,[a,c]));return this};a.arcTo=function(a,c,d,e,f){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.arcTo,[a,c,d,e,f]));return this};a.arc=function(a,c,d,e,f,g){this._dirty=this._active=true;if(g==null)g=false;this._activeInstructions.push(new b(this._ctx.arc,[a,c,d,e,f,g]));return this};a.quadraticCurveTo=function(a,c,d,e){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.quadraticCurveTo,[a,c,d,e]));return this};a.bezierCurveTo=function(a,c,d,e,f,g){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.bezierCurveTo,[a,c,d,e,f,g]));return this};a.rect=function(a,c,d,e){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.rect,[a,c,d-1,e]));return this};a.closePath=function(){if(this._active){this._dirty=true;this._activeInstructions.push(new b(this._ctx.closePath,[]))}return this};a.clear=function(){this._instructions=[];this._oldInstructions=[];this._activeInstructions=[];this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null;this._active=this._dirty=false;return this};a.beginFill=function(a){this._active&&this._newPath();this._fillInstructions=a?[new b(this._setProp,["fillStyle",a])]:null;return this};a.beginLinearGradientFill=function(a,c,d,e,f,g){this._active&&this._newPath();d=this._ctx.createLinearGradient(d,e,f,g);e=0;for(f=a.length;e<f;e++)d.addColorStop(c[e],a[e]);this._fillInstructions=[new b(this._setProp,["fillStyle",d])];return this};a.beginRadialGradientFill=function(a,c,d,e,f,g,h,i){this._active&&this._newPath();d=this._ctx.createRadialGradient(d,e,f,g,h,i);e=0;for(f=a.length;e<f;e++)d.addColorStop(c[e],a[e]);this._fillInstructions=[new b(this._setProp,["fillStyle",d])];return this};a.beginBitmapFill=function(a,c){this._active&&this._newPath();var d=this._ctx.createPattern(a,c||"");this._fillInstructions=[new b(this._setProp,["fillStyle",d])];return this};a.endFill=function(){this.beginFill(null);return this};a.setStrokeStyle=function(a,c,d,e){this._active&&this._newPath();this._strokeStyleInstructions=[new b(this._setProp,["lineWidth",a==null?"1":a]),new b(this._setProp,["lineCap",c==null?"butt":isNaN(c)?c:Graphics.STROKE_CAPS_MAP[c]]),new b(this._setProp,["lineJoin",d==null?"miter":isNaN(d)?d:Graphics.STROKE_JOINTS_MAP[d]]),new b(this._setProp,["miterLimit",e==null?"10":e])];return this};a.beginStroke=function(a){this._active&&this._newPath();this._strokeInstructions=a?[new b(this._setProp,["strokeStyle",a])]:null;return this};a.beginLinearGradientStroke=function(a,c,d,e,f,g){this._active&&this._newPath();d=this._ctx.createLinearGradient(d,e,f,g);e=0;for(f=a.length;e<f;e++)d.addColorStop(c[e],a[e]);this._strokeInstructions=[new b(this._setProp,["strokeStyle",d])];return this};a.beginRadialGradientStroke=function(a,c,d,e,f,g,h,i){this._active&&this._newPath();d=this._ctx.createRadialGradient(d,e,f,g,h,i);e=0;for(f=a.length;e<f;e++)d.addColorStop(c[e],a[e]);this._strokeInstructions=[new b(this._setProp,["strokeStyle",d])];return this};a.beginBitmapStroke=function(a,c){this._active&&this._newPath();var d=this._ctx.createPattern(a,c||"");this._strokeInstructions=[new b(this._setProp,["strokeStyle",d])];return this};a.endStroke=function(){this.beginStroke(null);return this};a.curveTo=a.quadraticCurveTo;a.drawRect=a.rect;a.drawRoundRect=function(a,b,c,d,e){this.drawRoundRectComplex(a,b,c,d,e,e,e,e);return this};a.drawRoundRectComplex=function(a,c,d,e,f,g,h,i){this._dirty=this._active=true;this._activeInstructions.push(new b(this._ctx.moveTo,[a+f,c]),new b(this._ctx.lineTo,[a+d-g,c]),new b(this._ctx.arc,[a+d-g,c+g,g,-Math.PI/2,0,false]),new b(this._ctx.lineTo,[a+d,c+e-h]),new b(this._ctx.arc,[a+d-h,c+e-h,h,0,Math.PI/2,false]),new b(this._ctx.lineTo,[a+i,c+e]),new b(this._ctx.arc,[a+i,c+e-i,i,Math.PI/2,Math.PI,false]),new b(this._ctx.lineTo,[a,c+f]),new b(this._ctx.arc,[a+f,c+f,f,Math.PI,Math.PI*3/2,false]));return this};a.drawCircle=function(a,b,c){this.arc(a,b,c,0,Math.PI*2);return this};a.drawEllipse=function(a,c,d,e){this._dirty=this._active=true;var f=d/2*.5522848,g=e/2*.5522848,h=a+d,i=c+e;d=a+d/2;e=c+e/2;this._activeInstructions.push(new b(this._ctx.moveTo,[a,e]),new b(this._ctx.bezierCurveTo,[a,e-g,d-f,c,d,c]),new b(this._ctx.bezierCurveTo,[d+f,c,h,e-g,h,e]),new b(this._ctx.bezierCurveTo,[h,e+g,d+f,i,d,i]),new b(this._ctx.bezierCurveTo,[d-f,i,a,e+g,a,e]));return this};a.drawPolyStar=function(a,c,d,e,f,g){this._dirty=this._active=true;if(f==null)f=0;f=1-f;if(g==null)g=0;else g/=180/Math.PI;var h=Math.PI/e;this._activeInstructions.push(new b(this._ctx.moveTo,[a+Math.cos(g)*d,c+Math.sin(g)*d]));for(var i=0;i<e;i++){g+=h;f!=1&&this._activeInstructions.push(new b(this._ctx.lineTo,[a+Math.cos(g)*d*f,c+Math.sin(g)*d*f]));g+=h;this._activeInstructions.push(new b(this._ctx.lineTo,[a+Math.cos(g)*d,c+Math.sin(g)*d]))}return this};a.clone=function(){var a=new Graphics;a._instructions=this._instructions.slice();a._activeInstructions=this._activeInstructions.slice();a._oldInstructions=this._oldInstructions.slice();if(this._fillInstructions)a._fillInstructions=this._fillInstructions.slice();if(this._strokeInstructions)a._strokeInstructions=this._strokeInstructions.slice();if(this._strokeStyleInstructions)a._strokeStyleInstructions=this._strokeStyleInstructions.slice();a._active=this._active;a._dirty=this._dirty;return a};a.toString=function(){return"[Graphics]"};a.mt=a.moveTo;a.lt=a.lineTo;a.at=a.arcTo;a.bt=a.bezierCurveTo;a.qt=a.quadraticCurveTo;a.a=a.arc;a.r=a.rect;a.cp=a.closePath;a.c=a.clear;a.f=a.beginFill;a.lf=a.beginLinearGradientFill;a.rf=a.beginRadialGradientFill;a.bf=a.beginBitmapFill;a.ef=a.endFill;a.ss=a.setStrokeStyle;a.s=a.beginStroke;a.ls=a.beginLinearGradientStroke;a.rs=a.beginRadialGradientStroke;a.bs=a.beginBitmapStroke;a.es=a.endStroke;a.dr=a.drawRect;a.rr=a.drawRoundRect;a.rc=a.drawRoundRectComplex;a.dc=a.drawCircle;a.de=a.drawEllipse;a.dp=a.drawPolyStar;a._updateInstructions=function(){this._instructions=this._oldInstructions.slice();this._instructions.push(Graphics.beginCmd);this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions);if(this._strokeInstructions){this._instructions.push.apply(this._instructions,this._strokeInstructions);this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions)}this._instructions.push.apply(this._instructions,this._activeInstructions);this._fillInstructions&&this._instructions.push(Graphics.fillCmd);this._strokeInstructions&&this._instructions.push(Graphics.strokeCmd)};a._newPath=function(){this._dirty&&this._updateInstructions();this._oldInstructions=this._instructions;this._activeInstructions=[];this._active=this._dirty=false};a._setProp=function(a,b){this[a]=b};l.Graphics=Graphics})(window);(function(a){DisplayObject=function(){this.initialize()};var b=DisplayObject.prototype;DisplayObject.suppressCrossDomainErrors=false;DisplayObject._hitTestCanvas=document.createElement("canvas");DisplayObject._hitTestCanvas.width=DisplayObject._hitTestCanvas.height=1;DisplayObject._hitTestContext=DisplayObject._hitTestCanvas.getContext("2d");DisplayObject._workingMatrix=new Matrix2D;b.alpha=1;b.cacheCanvas=null;b.id=-1;b.mouseEnabled=true;b.name=null;b.parent=null;b.regX=0;b.regY=0;b.rotation=0;b.scaleX=1;b.scaleY=1;b.skewX=0;b.skewY=0;b.shadow=null;b.visible=true;b.x=0;b.y=0;b.compositeOperation=null;b.snapToPixel=false;b.onPress=null;b.onClick=null;b.onMouseOver=null;b.onMouseOut=null;b._cacheOffsetX=0;b._cacheOffsetY=0;b._cacheDraw=false;b._activeContext=null;b._restoreContext=false;b._revertShadow=false;b._revertX=0;b._revertY=0;b._revertAlpha=1;b.initialize=function(){this.id=UID.get();this.children=[]};b.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0};b.draw=function(a,b){if(b||!this.cacheCanvas)return false;a.translate(this._cacheOffsetX,this._cacheOffsetY);a.drawImage(this.cacheCanvas,0,0);a.translate(-this._cacheOffsetX,-this._cacheOffsetY);return true};b.cache=function(a,b,c,d){var e;if(this.cacheCanvas==null)this.cacheCanvas=document.createElement("canvas");e=this.cacheCanvas.getContext("2d");this.cacheCanvas.width=c;this.cacheCanvas.height=d;e.setTransform(1,0,0,1,-a,-b);e.clearRect(0,0,c+1,d+1);this.draw(e,true);this._cacheOffsetX=a;this._cacheOffsetY=b};b.updateCache=function(a){if(this.cacheCanvas==null)throw"cache() must be called before updateCache()";var b=this.cacheCanvas.getContext("2d");b.setTransform(1,0,0,1,-this._cacheOffsetX,-this._cacheOffsetY);if(a)b.globalCompositeOperation=a;else b.clearRect(0,0,this.cacheCanvas.width+1,this.cacheCanvas.height+1);this.draw(b,true);if(a)b.globalCompositeOperation="source-over"};b.uncache=function(){this.cacheCanvas=null;this.cacheOffsetX=this.cacheOffsetY=0};b.getStage=function(){for(var a=this;a.parent;)a=a.parent;if(a instanceof Stage)return a;return null};b.localToGlobal=function(a,b){var c=this.getConcatenatedMatrix();if(c==null)return null;c.append(1,0,0,1,a,b);return new Point(c.tx,c.ty)};b.globalToLocal=function(a,b){var c=this.getConcatenatedMatrix();if(c==null)return null;c.invert();c.append(1,0,0,1,a,b);return new Point(c.tx,c.ty)};b.localToLocal=function(a,b,c){a=this.localToGlobal(a,b);return c.globalToLocal(a.x,a.y)};b.getConcatenatedMatrix=function(a){if(a)a.identity();else a=new Matrix2D;for(var b=this;b!=null;){a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY);a.prependProperties(b.alpha,b.shadow,b.compositeOperation);b=b.parent}return a};b.hitTest=function(a,b){var c=DisplayObject._hitTestContext,d=DisplayObject._hitTestCanvas;c.setTransform(1,0,0,1,-a,-b);this.draw(c);c=this._testHit(c);d.width=0;d.width=1;return c};b.clone=function(){var a=new DisplayObject;this.cloneProps(a);return a};b.toString=function(){return"[DisplayObject (name="+this.name+")]"};b.cloneProps=function(a){a.alpha=this.alpha;a.name=this.name;a.regX=this.regX;a.regY=this.regY;a.rotation=this.rotation;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.shadow=this.shadow;a.skewX=this.skewX;a.skewY=this.skewY;a.visible=this.visible;a.x=this.x;a.y=this.y;a.mouseEnabled=this.mouseEnabled;a.compositeOperation=this.compositeOperation};b.applyShadow=function(a,b){b=b||Shadow.identity;a.shadowColor=b.color;a.shadowOffsetX=b.offsetX;a.shadowOffsetY=b.offsetY;a.shadowBlur=b.blur};b._testHit=function(a){try{var b=a.getImageData(0,0,1,1).data[3]>1}catch(c){if(!DisplayObject.suppressCrossDomainErrors)throw"An error has occured. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images."}return b};a.DisplayObject=DisplayObject})(window);(function(a){Container=function(){this.initialize()};var b=Container.prototype=new DisplayObject;b.children=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(){this.DisplayObject_initialize();this.children=[]};b.isVisible=function(){return this.visible&&this.alpha>0&&this.children.length&&this.scaleX!=0&&this.scaleY!=0};b.DisplayObject_draw=b.draw;b.draw=function(a,b,c){var d=Stage._snapToPixelEnabled;if(!c){c=new Matrix2D;c.appendProperties(this.alpha,this.shadow,this.compositeOperation)}if(this.DisplayObject_draw(a,b))return true;b=this.children.length;for(var e=this.children.slice(0),f=0;f<b;f++){var g=e[f];g.tick&&g.tick();if(g.isVisible()){var h=false,i=c.clone();i.appendTransform(g.x,g.y,g.scaleX,g.scaleY,g.rotation,g.skewX,g.skewY,g.regX,g.regY);i.appendProperties(g.alpha,g.shadow,g.compositeOperation);if(!(g instanceof Container)){d&&g.snapToPixel&&i.a==1&&i.b==0&&i.c==0&&i.d==1?a.setTransform(i.a,i.b,i.c,i.d,i.tx+.5|0,i.ty+.5|0):a.setTransform(i.a,i.b,i.c,i.d,i.tx,i.ty);a.globalAlpha=i.alpha;a.globalCompositeOperation=i.compositeOperation||"source-over";if(h=i.shadow)this.applyShadow(a,h)}g.draw(a,false,i);h&&this.applyShadow(a)}}return true};b.addChild=function(a){var b=arguments.length;if(b>1){for(var c=0;c<b;c++)this.addChild(arguments[c]);return arguments[b-1]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.push(a);return a};b.addChildAt=function(a,b){var c=arguments.length;if(c>2){b=arguments[d-1];for(var d=0;d<c-1;d++)this.addChildAt(arguments[d],b+d);return arguments[c-2]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.splice(b,0,a);return a};b.removeChild=function(a){var b=arguments.length;if(b>1){for(var c=true,d=0;d<b;d++)c=c&&this.removeChild(arguments[d]);return c}return this.removeChildAt(this.children.indexOf(a))};b.removeChildAt=function(a){var b=arguments.length;if(b>1){for(var c=[],d=0;d<b;d++)c[d]=arguments[d];c.sort(function(a,b){return b-a});var e=true;for(d=0;d<b;d++)e=e&&this.removeChildAt(c[d]);return e}if(a<0||a>this.children.length-1)return false;b=this.children[a];if(b!=null)b.parent=null;this.children.splice(a,1);return true};b.removeAllChildren=function(){for(;this.children.length;)this.removeChildAt(0)};b.getChildAt=function(a){return this.children[a]};b.sortChildren=function(a){this.children.sort(a)};b.getChildIndex=function(a){return this.children.indexOf(a)};b.getNumChildren=function(){return this.children.length};b.contains=function(a){for(;a;){if(a==this)return true;a=a.parent}return false};b.hitTest=function(a,b){return this.getObjectUnderPoint(a,b)!=null};b.getObjectsUnderPoint=function(a,b){var c=[],d=this.localToGlobal(a,b);this._getObjectsUnderPoint(d.x,d.y,c);return c};b.getObjectUnderPoint=function(a,b){var c=this.localToGlobal(a,b);return this._getObjectsUnderPoint(c.x,c.y)};b.clone=function(a){var b=new Container;this.cloneProps(b);if(a)for(var c=b.children=[],d=0,e=this.children.length;d<e;d++)c.push(this.children[d].clone(a));return b};b.toString=function(){return"[Container (name="+this.name+")]"};b._getObjectsUnderPoint=function(a,b,c,d){var e=DisplayObject._hitTestContext,f=DisplayObject._hitTestCanvas,g=DisplayObject._workingMatrix,h=d&1&&(this.onPress||this.onClick)||d&2&&(this.onMouseOver||this.onMouseOut);if(this.cacheCanvas){this.getConcatenatedMatrix(g);e.setTransform(g.a,g.b,g.c,g.d,g.tx-a,g.ty-b);e.globalAlpha=g.alpha;this.draw(e);if(this._testHit(e)){f.width=0;f.width=1;if(h)return this}else return null}for(var i=this.children.length-1;i>=0;i--){var j=this.children[i];if(j.isVisible()&&j.mouseEnabled)if(j instanceof Container)if(h){if(j=j._getObjectsUnderPoint(a,b))return this}else{j=j._getObjectsUnderPoint(a,b,c,d);if(!c&&j)return j}else if(!d||h||d&1&&(j.onPress||j.onClick)||d&2&&(j.onMouseOver||j.onMouseOut)){j.getConcatenatedMatrix(g);e.setTransform(g.a,g.b,g.c,g.d,g.tx-a,g.ty-b);e.globalAlpha=g.alpha;j.draw(e);if(this._testHit(e)){f.width=0;f.width=1;if(h)return this;else if(c)c.push(j);else return j}}}return null};a.Container=Container})(window);(function(a){Stage=function(a){this.initialize(a)};var b=Stage.prototype=new Container;Stage._snapToPixelEnabled=false;b.autoClear=true;b.canvas=null;b.mouseX=null;b.mouseY=null;b.onMouseMove=null;b.onMouseUp=null;b.onMouseDown=null;b.snapToPixelEnabled=false;b.mouseInBounds=false;b._tmpCanvas=null;b._activeMouseEvent=null;b._activeMouseTarget=null;b._mouseOverIntervalID=null;b._mouseOverX=0;b._mouseOverY=0;b._mouseOverTarget=null;b.Container_initialize=b.initialize;b.initialize=function(b){this.Container_initialize();this.canvas=b;this.mouseChildren=true;var c=this;if(a.addEventListener){a.addEventListener("mouseup",function(a){c._handleMouseUp(a)},false);a.addEventListener("mousemove",function(a){c._handleMouseMove(a)},false)}else if(document.addEventListener){document.addEventListener("mouseup",function(a){c._handleMouseUp(a)},false);document.addEventListener("mousemove",function(a){c._handleMouseMove(a)},false)}b.addEventListener("mousedown",function(a){c._handleMouseDown(a)},false)};b.update=function(){if(this.canvas){this.autoClear&&this.clear();Stage._snapToPixelEnabled=this.snapToPixelEnabled;this.draw(this.canvas.getContext("2d"),false,this.getConcatenatedMatrix(DisplayObject._workingMatrix))}};b.tick=b.update;b.clear=function(){if(this.canvas){var a=this.canvas.getContext("2d");a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.canvas.width,this.canvas.height)}};b.toDataURL=function(a,b){b||(b="image/png");var c=this.canvas.getContext("2d"),d=this.canvas.width,e=this.canvas.height,f;if(a){f=c.getImageData(0,0,d,e);var g=c.globalCompositeOperation;c.globalCompositeOperation="destination-over";c.fillStyle=a;c.fillRect(0,0,d,e)}var h=this.canvas.toDataURL(b);if(a){c.clearRect(0,0,d,e);c.putImageData(f,0,0);c.globalCompositeOperation=g}return h};b.enableMouseOver=function(a){if(this._mouseOverIntervalID){clearInterval(this._mouseOverIntervalID);this._mouseOverIntervalID=null}if(!(a<=0)){var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1e3/Math.min(50,a));this._mouseOverX=NaN;this._mouseOverTarget=null}};b.clone=function(){var a=new Stage(null);this.cloneProps(a);return a};b.toString=function(){return"[Stage (name="+this.name+")]"};b._handleMouseMove=function(b){if(this.canvas){if(!b)b=a.event;var c=this.mouseInBounds;this._updateMousePosition(b.pageX,b.pageY);if(c||this.mouseInBounds){b=new MouseEvent("onMouseMove",this.mouseX,this.mouseY);if(this.onMouseMove)this.onMouseMove(b);if(this._activeMouseEvent&&this._activeMouseEvent.onMouseMove)this._activeMouseEvent.onMouseMove(b)}}else this.mouseX=this.mouseY=null};b._updateMousePosition=function(a,b){var c=this.canvas;do{a-=c.offsetLeft;b-=c.offsetTop}while(c=c.offsetParent);if(this.mouseInBounds=a>=0&&b>=0&&a<this.canvas.width&&b<this.canvas.height){this.mouseX=a;this.mouseY=b}};b._handleMouseUp=function(){var a=new MouseEvent("onMouseUp",this.mouseX,this.mouseY);if(this.onMouseUp)this.onMouseUp(a);if(this._activeMouseEvent&&this._activeMouseEvent.onMouseUp)this._activeMouseEvent.onMouseUp(a);if(this._activeMouseTarget&&this._activeMouseTarget.onClick&&this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,true,this._mouseOverIntervalID?3:1)==this._activeMouseTarget)this._activeMouseTarget.onClick(new MouseEvent("onClick",this.mouseX,this.mouseY));this._activeMouseEvent=this.activeMouseTarget=null};b._handleMouseDown=function(){if(this.onMouseDown)this.onMouseDown(new MouseEvent("onMouseDown",this.mouseX,this.mouseY));var a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);if(a){if(a.onPress instanceof Function){var b=new MouseEvent("onPress",this.mouseX,this.mouseY);a.onPress(b);if(b.onMouseMove||b.onMouseUp)this._activeMouseEvent=b}this._activeMouseTarget=a}};b._testMouseOver=function(){if(!(this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)){var a=null;if(this.mouseInBounds){a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3);this._mouseOverX=this.mouseX;this._mouseOverY=this.mouseY}if(this._mouseOverTarget!=a){if(this._mouseOverTarget&&this._mouseOverTarget.onMouseOut)this._mouseOverTarget.onMouseOut(new MouseEvent("onMouseOver",this.mouseX,this.mouseY));if(a&&a.onMouseOver)a.onMouseOver(new MouseEvent("onMouseOut",this.mouseX,this.mouseY));this._mouseOverTarget=a}}};a.Stage=Stage})(window);(function(a){Bitmap=function(a){this.initialize(a)};var b=Bitmap.prototype=new DisplayObject;b.image=null;b.snapToPixel=true;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();this.image=a};b.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.image&&(this.image.complete||this.image.getContext)};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return true;a.drawImage(this.image,0,0);return true};b.clone=function(){var a=new Bitmap(this.image);this.cloneProps(a);return a};b.toString=function(){return"[Bitmap (name="+this.name+")]"};a.Bitmap=Bitmap})(window);(function(a){BitmapSequence=function(a){this.initialize(a)};var b=BitmapSequence.prototype=new DisplayObject;b.callback=null;b.currentFrame=-1;b.currentSequence=null;b.currentEndFrame=null;b.currentStartFrame=null;b.nextSequence=null;b.paused=false;b.spriteSheet=null;b.snapToPixel=true;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();this.spriteSheet=a};b.isVisible=function(){var a=this.spriteSheet?this.spriteSheet.image:null;return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&a&&this.currentFrame>=0&&(a.complete||a.getContext)};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return true;var c=this.spriteSheet.image,d=this.spriteSheet.frameWidth,e=this.spriteSheet.frameHeight,f=c.width/d|0,g=c.height/e|0;if(this.currentEndFrame!=null){if(this.currentFrame>this.currentEndFrame){if(this.nextSequence)this._goto(this.nextSequence);else{this.paused=true;this.currentFrame=this.currentEndFrame}this.callback&&this.callback(this)}}else{g=this.spriteSheet.totalFrames||f*g;if(this.currentFrame>=g){if(this.spriteSheet.loop)this.currentFrame=0;else{this.currentFrame=g-1;this.paused=true}this.callback&&this.callback(this)}}this.currentFrame>=0&&a.drawImage(c,d*(this.currentFrame%f),e*(this.currentFrame/f|0),d,e,0,0,d,e);return true};b.tick=function(){if(this.currentFrame==-1&&this.spriteSheet.frameData)this.paused=true;this.paused||this.currentFrame++};b.gotoAndPlay=function(a){this.paused=false;this._goto(a)};b.gotoAndStop=function(a){this.paused=true;this._goto(a)};b.clone=function(){var a=new BitmapSequence(this.spriteSheet);this.cloneProps(a);return a};b.toString=function(){return"[BitmapSequence (name="+this.name+")]"};b.DisplayObject_cloneProps=b.cloneProps;b.cloneProps=function(a){this.DisplayObject_cloneProps(a);a.callback=this.callback;a.currentFrame=this.currentFrame;a.currentStartFrame=this.currentStartFrame;a.currentEndFrame=this.currentEndFrame;a.currentSequence=this.currentSequence;a.nextSequence=this.nextSequence;a.paused=this.paused;a.frameData=this.frameData};b._goto=function(a){if(isNaN(a))if(a==this.currentSequence)this.currentFrame=this.currentStartFrame;else{var b=this.spriteSheet.frameData[a];if(b instanceof Array){this.currentFrame=this.currentStartFrame=b[0];this.currentSequence=a;this.currentEndFrame=b[1];if(this.currentEndFrame==null)this.currentEndFrame=this.currentStartFrame;if(this.currentEndFrame==null)this.currentEndFrame=this.currentFrame;this.nextSequence=b[2];if(this.nextSequence==null)this.nextSequence=this.currentSequence;else if(this.nextSequence==false)this.nextSequence=null}else{this.currentSequence=this.nextSequence=null;this.currentEndFrame=this.currentFrame=this.currentStartFrame=b}}else{this.currentSequence=this.nextSequence=this.currentEndFrame=null;this.currentStartFrame=0;this.currentFrame=a}};a.BitmapSequence=BitmapSequence})(window);(function(a){Shape=function(a){this.initialize(a)};var b=Shape.prototype=new DisplayObject;b.graphics=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();this.graphics=a?a:new Graphics};b.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.graphics};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return true;this.graphics.draw(a);return true};b.clone=function(a){a=new Shape(a&&this.graphics?this.graphics.clone():this.graphics);this.cloneProps(a);return a};b.toString=function(){return"[Shape (name="+this.name+")]"};a.Shape=Shape})(window);(function(a){Text=function(a,b,c){this.initialize(a,b,c)};var b=Text.prototype=new DisplayObject;Text._workingContext=document.createElement("canvas").getContext("2d");b.text="";b.font=null;b.color=null;b.textAlign=null;b.textBaseline=null;b.maxWidth=null;b.outline=false;b.lineHeight=null;b.lineWidth=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a,b,c){this.DisplayObject_initialize();this.text=a;this.font=b;this.color=c?c:"#000"};b.isVisible=function(){return Boolean(this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.text!=null&&this.text!="")};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return true;if(this.outline)a.strokeStyle=this.color;else a.fillStyle=this.color;a.font=this.font;a.textAlign=this.textAlign?this.textAlign:"start";a.textBaseline=this.textBaseline?this.textBaseline:"alphabetic";for(var c=String(this.text).split(/(?:\r\n|\r|\n)/),d=this.lineHeight==null?this.getMeasuredLineHeight():this.lineHeight,e=0,f=0,g=c.length;f<g;f++){var h=a.measureText(c[f]).width;if(this.lineWidth==null||h<this.lineWidth)this._drawTextLine(a,c[f],e);else{h=c[f].split(/(\s)/);for(var i=h[0],j=1,k=h.length;j<k;j+=2)if(a.measureText(i+h[j]+h[j+1]).width>this.lineWidth){this._drawTextLine(a,i,e);e+=d;i=h[j+1]}else i+=h[j]+h[j+1];this._drawTextLine(a,i,e)}e+=d}return true};b.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width};b.getMeasuredLineHeight=function(){return this._getWorkingContext().measureText("M").width*1.2};b.clone=function(){var a=new Text(this.text,this.font,this.color);this.cloneProps(a);return a};b.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"};b.DisplayObject_cloneProps=b.cloneProps;b.cloneProps=function(a){this.DisplayObject_cloneProps(a);a.textAlign=this.textAlign;a.textBaseline=this.textBaseline;a.maxWidth=this.maxWidth;a.outline=this.outline;a.lineHeight=this.lineHeight;a.lineWidth=this.lineWidth};b._getWorkingContext=function(){var a=Text._workingContext;a.font=this.font;a.textAlign=this.textAlign?this.textAlign:"start";a.textBaseline=this.textBaseline?this.textBaseline:"alphabetic";return a};b._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth):a.fillText(b,0,c,this.maxWidth)};a.Text=Text})(window);(function(a){SpriteSheetUtils=function(){throw"SpriteSheetUtils cannot be instantiated"};SpriteSheetUtils._workingCanvas=document.createElement("canvas");SpriteSheetUtils._workingContext=SpriteSheetUtils._workingCanvas.getContext("2d");SpriteSheetUtils.flip=function(a,b){var c=a.image,d=a.frameData,e=a.frameWidth,f=a.frameHeight,g=c.width/e|0,h=c.height/f|0,i=g*h,j={},k,l;for(l in d){k=d[l];if(k instanceof Array)k=k.slice(0);j[l]=k}var m=[],n=0,o=0;for(l in b){k=b[l];k=d[k[0]];if(k!=null){if(k instanceof Array){var p=k[0],q=k[1];if(q==null)q=p}else p=q=k;m[o]=l;m[o+1]=p;m[o+2]=q;n+=q-p+1;o+=4}}d=SpriteSheetUtils._workingCanvas;d.width=c.width;d.height=Math.ceil(h+n/g)*f;n=SpriteSheetUtils._workingContext;n.drawImage(c,0,0,g*e,h*f,0,0,g*e,h*f);h=i-1;for(o=0;o<m.length;o+=4){l=m[o];p=m[o+1];q=m[o+2];k=b[l];i=k[1]?-1:1;for(var r=k[2]?-1:1,s=i==-1?e:0,t=r==-1?f:0,u=p;u<=q;u++){h++;n.save();n.translate(h%g*e+s,(h/g|0)*f+t);n.scale(i,r);n.drawImage(c,u%g*e,(u/g|0)*f,e,f,0,0,e,f);n.restore()}j[l]=[h-(q-p),h,k[3]]}c=new Image;c.src=d.toDataURL("image/png");return new SpriteSheet(c.width>0?c:d,e,f,j)};SpriteSheetUtils.frameDataToString=function(a){var b="",c=0,d=0,e=0,f,g;for(g in a){e++;f=a[g];if(f instanceof Array){var h=f[0],i=f[1];if(i==null)i=h;f=f[2];if(f==null)f=g}else{h=i=f;f=g}b+="\n\t"+g+", start="+h+", end="+i+", next="+f;if(f==false)b+=" (stop)";else if(f==g)b+=" (loop)";if(i>c)c=i;if(h<d)d=h}return e+" sequences, min="+d+", max="+c+b};SpriteSheetUtils.extractFrame=function(a,b){var c=a.image,d=a.frameWidth,e=a.frameHeight,f=c.width/d|0;if(isNaN(b)){var g=a.frameData[b];b=g instanceof Array?g[0]:g}g=SpriteSheetUtils._workingCanvas;g.width=d;g.height=e;SpriteSheetUtils._workingContext.drawImage(c,b%f*d,(b/f|0)*e,d,e,0,0,d,e);c=new Image;c.src=g.toDataURL("image/png");return c};a.SpriteSheetUtils=SpriteSheetUtils})(window);(function(a){Circle=function(a,b,c){this.initialize(a,b,c)};var b=Circle.prototype;b.x=0;b.y=0;b.radius=0;b.initialize=function(a,b,c){this.x=a==null?0:a;this.y=b==null?0:b;this.radius=c==null?0:c};b.clone=function(){return new Circle(this.x,this.y,this.radius)};b.toString=function(){return"[Circle (x="+this.x+" y="+this.y+" radius="+this.radius+")]"};a.Circle=Circle})(window);(function(a){function b(a,b,c,d){this.initialize(a,b,c,d)}var c=b.prototype=new Container;b.TYPE1=1;b.TYPE1_VEL=2;b.TYPE1_IMAGE=new Image;b.TYPE1_IMAGE.src="img/ufo/ufo1.png";b.TYPE2=2;b.TYPE2_VEL=1;b.TYPE2_IMAGE=new Image;b.TYPE2_IMAGE.src="img/ufo/ufo2.png";BLINK_TIME=500;c.type;c.bitmap;c.routeShape;c.routeColor;c.text;c.lastUFOShapeRadius=0;c.ufoShape;c.positions;c.hit;c.vel;c.isActive=false;c.isLanding=false;c.isAirportRouteTraced=false;c.isWarning=false;c.isToDelete=false;c.beforeActiveCounter;c.lastVisibleChangeDate;c.max_x;c.max_y;c.Shape_initialize=c.initialize;c.initialize=function(a,c,d,e){this.Shape_initialize();this.type=a;this.max_x=d;this.max_y=e;this.name=name;if(this.type==b.TYPE1){this.name="Nitro";this.vel=b.TYPE1_VEL;this.bitmap=new Bitmap(b.TYPE1_IMAGE);this.hit=this.bitmap.image.width/2|0;this.routeColor=Graphics.getRGB(203,128,70,.2)}else if(this.type==b.TYPE2){this.name="Turbo";this.vel=b.TYPE2_VEL;this.bitmap=new Bitmap(b.TYPE2_IMAGE);this.hit=this.bitmap.image.width/2|0;this.routeColor=Graphics.getRGB(219,192,113,.2)}this.bitmap.name=name;this.bitmap.regX=this.bitmap.image.width/2|0;this.bitmap.regY=this.bitmap.image.height/2|0;this.bitmap.scaleX=this.bitmap.scaleY=this.bitmap.scale=1;this.routeShape=new Shape;this.text=new Text(this.name,"bold 12px Arial","#FF0000");this.text.visible=false;this.addChild(this.bitmap);this.addChild(this.routeShape);this.addChild(this.text);this.ufoShape=new Shape;this.addChild(this.ufoShape);this.positions=new Array;this.isActive=false;this.beforeActiveCounter=c;this.lastVisibleChangeDate=new Date};c.mouseOver=function(){this.bitmap.scaleX=this.bitmap.scaleY=this.bitmap.scale*1.5;this.text.visible=true};c.mouseOut=function(){this.bitmap.scaleX=this.bitmap.scaleY=this.bitmap.scale;this.text.visible=false};c.setPosition=function(a,b){this.bitmap.x=a;this.bitmap.y=b;this.text.x=a;this.text.y=b};c.addRoutePoint=function(a,b){this.positions.push(new Point(a,b))};c.clearRoute=function(){this.routeShape.graphics.clear();this.positions.length=0};c.getLastPositions=function(a){var b=new Array;if(this.positions.length<a){return b}b=this.positions.slice(-a);return b};c.addRandomRoute=function(){var a=Math.round((this.max_x-200)*Math.random());var b=Math.round((this.max_y-200)*Math.random());if(a<200){a=200}if(b<200){b=200}x3=Math.round((this.bitmap.x+a)/2);y3=Math.round((this.bitmap.y+b)/2);this.addRoutePoint(x3,y3);this.addRoutePoint(a,b);this.setAirportRouteTraced(false)};c.drawRoute=function(a,b,c,d){this.routeShape.graphics.setStrokeStyle(10,"round","round").beginStroke(this.routeColor);this.routeShape.graphics.moveTo(a,b);this.routeShape.graphics.lineTo(c,d)};c.move=function(){if(!this.isActive&&this.beforeActiveCounter>0){var a=new Date;if(a.getTime()-this.lastVisibleChangeDate.getTime()>BLINK_TIME){this.bitmap.visible=!this.bitmap.visible;this.lastVisibleChangeDate=a}this.beforeActiveCounter--;this.drawUFOCircle(this.hit*2,this.routeColor,10);return}else if(!this.isActive&&!this.isLanding){this.bitmap.visible=true;this.bitmap.alpha=1;this.ufoShape.graphics.clear();this.isActive=true}if(this.positions.length<=0){if(!this.isLanding){this.clearRoute();this.addRandomRoute()}else{this.isToDelete=true;return}}var b=0;while(b<this.vel){var c=this.positions.shift();if(!c){break}if(c.x>this.bitmap.x){this.bitmap.x=this.bitmap.x+1}else if(c.x<this.bitmap.x){this.bitmap.x=this.bitmap.x-1}if(c.y>this.bitmap.y){this.bitmap.y=this.bitmap.y+1}else if(c.y<this.bitmap.y){this.bitmap.y=this.bitmap.y-1}this.setPosition(this.bitmap.x,this.bitmap.y);if(this.bitmap.x!=c.x||this.bitmap.y!=c.y){this.positions.unshift(c)}xDiff=c.x-this.bitmap.x;yDiff=c.y-this.bitmap.y;b++}};c.hitPoint=function(a,b){return this.hitRadius(a,b,0)};c.hitRadius=function(a,b,c){return hitRadius(this.bitmap.x,this.bitmap.y,this.hit,a,b,c)};c.hitRectangle=function(a){return hitRectangle(this.bitmap.x,this.bitmap.y,a)};c.land=function(a){this.isActive=false;this.ufoShape.graphics.clear();this.lastUFOShapeRadius=this.hit;this.isLanding=true;this.vel=1;this.bitmap.scaleX=this.bitmap.scaleY=this.bitmap.scale=.5;this.clearRoute();for(index in a){var b=a[index];this.addRoutePoint(b.x,b.y)}};c.setAirportRouteTraced=function(a){if(this.isAirportRouteTraced!=a){this.isAirportRouteTraced=a;if(this.isAirportRouteTraced&&!this.isWarning){this.ufoShape.graphics.clear()}else if(!this.isAirportRouteTraced&&!this.isWarning){}}};c.changeToWarningMode=function(a){this.isWarning=true;this.drawUFOCircle(this.hit*4,Graphics.getRGB(255,0,0,1),1)};c.changeToNormalMode=function(){this.isWarning=false;this.ufoShape.graphics.clear()};c.explode=function(){this.ufoShape.graphics.clear();this.ufoShape.graphics.beginFill("#FFFF00");this.ufoShape.graphics.moveTo(this.bitmap.x,this.bitmap.y);var a=this.bitmap.image.width;var b=0;var c=a;while(b<Math.PI*2-.5){b+=.25+Math.random()*100/500;c=a+a/2*Math.random();this.ufoShape.graphics.lineTo(this.bitmap.x+Math.sin(b)*c,this.bitmap.y+Math.cos(b)*c)}this.ufoShape.graphics.endFill()};c.drawUFOCircle=function(a,b,c){this.ufoShape.graphics.clear();this.lastUFOShapeRadius+=2;if(this.lastUFOShapeRadius>a){this.lastUFOShapeRadius=this.hit}this.ufoShape.graphics.setStrokeStyle(c).beginStroke(b);this.ufoShape.graphics.drawCircle(this.bitmap.x,this.bitmap.y,this.lastUFOShapeRadius)};a.UFO=b})(window);var canvas;var context;var audio;var audio_playing=true;var audio_alarm;var audio_explosion;var audio_effects_enabled=true;var stage;var mouseTarget;var dragStarted;var startPt;var mapIdDisplayObject=new Object;var UFO1_AIRPORT;var UFO1_AIRPORT_PLANET_SHAPE;var UFO1_AIRPORT_ARROW_SHAPE;var UFO1_AIRPORT_ROUTE=[];var UFO2_AIRPORT;var UFO2_AIRPORT_PLANET_SHAPE;var UFO2_AIRPORT_ARROW_SHAPE;var UFO2_AIRPORT_ROUTE=[];var TICKS_BEFORE_ACTIVE_START_COUNTER=100;var INCREASE_DIFICULTY_DELAY_TIME=45e3;var CREATE_UFO_DELAY_TIME=7e3;var last_increase_dificulty_time;var last_create_airplanes_delay_time=CREATE_UFO_DELAY_TIME;var last_airplane_created=new Date;var last_nr_airplane_created;var factor;var isDead=true;var score=0;var messageField1;var messageField2;var messageField3;var messageContainer;var scoreField;var scoreFieldValue;var STARS_NUMBER=100;var stars=[];var lastTrackBlinkDate=new Date;BLINK_TIME=300;LOCAL_STORAGE_KEY="ufocontrol.max_score";var playShape;var pauseShape;var forwardShape;var rewindShape